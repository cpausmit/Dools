#!/bin/bash
#===================================================================================================
# This is a temporary file that should be used to summarize the present critical things to monitor
#
#===================================================================================================
OPTION="$1"
if [ -z "$T2TOOLS_BASE" ]
then
  echo " T2Tools are not initialized."
  exit 1
fi

if [ "$OPTION" == "" ] || [ "$OPTION" == "fibs" ]
then
  echo ""
  echo " FiBS -- makeCatalog"
  wc -l ~/cms/work/fibs/*.list | sed 's/^0/  /'
  echo "  - latest logs:"
  fibsLastLogs.py checkFile 100 | tail -5| sed "s/^/ /"
fi

if [ "$OPTION" == "" ] || [ "$OPTION" == "bambu" ]
then
  echo ""
  echo " Bambu -- progress"
  echo -n "  045 - "
  list /cms/store/user/paus/filefi/045/*/crab_0*/*_tmp.root|grep [0-9A-Z]_tmp.root | wc -l
  echo -n "  046 - "
  list /cms/store/user/paus/filefi/046/*/crab_0*/*_tmp.root|grep [0-9A-Z]_tmp.root | wc -l
  echo ""
fi

if [ "$OPTION" == "" ] || [ "$OPTION" == "panda" ]
then
  echo ""
  echo " Panda -- progress"
  echo -n "  000 - "
  list /cms/store/user/paus/pandaf/000/*/crab_0*/*_tmp.root|grep [0-9A-Z]_tmp.root | wc -l
  echo ""
fi

if [ "$OPTION" == "" ] || [ "$OPTION" == "monotop" ]
then
  nMonoTopFast=`rglexec hdfs dfs -ls /cms/store/user/paus/fastsm/043/monotop* |grep bambu |wc -l`
  nMonoTopFull=`rglexec hdfs dfs -ls /cms/store/user/paus/fullsm/044/monotop* |grep bambu |wc -l`
  echo ""
  echo " TheStudyPackage -- progress monotop"
  echo "  fast - $nMonoTopFast"
  echo "  full - $nMonoTopFull"
  echo ""
fi

if [ "$OPTION" == "" ] || [ "$OPTION" == "space" ]
then
  spaceMonitor
fi

exit 0
